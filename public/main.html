<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>HIENDBRANDS</title>
    <meta name="description" content="Skeleton HTML structure for a project" />
    <link type="text/css" rel="stylesheet" href="Main.css" />
</head>

<body>

    <!-- Navigation Bar -->
    <header class="navbar">
        <a href="main.html" class="logo">HIENDBRANDS&trade;</a>

        <nav>
            <ul class="nav-links">
                <li><a href="main.html" class="menu-link">NEW ARRIVAL</a></li>

                <li class="has-dropdown type-wide">
                    <a href="#" class="menu-link">COLLABORATION&reg;</a>
                    <div class="dropdown-menu">
                        <div class="dropdown-inner">
                            <div class="dd-col">
                                <span class="dd-header">Collection</span>
                                <div class="dd-list">
                                    <a href="thaitanium.html">CARNIVAL® X THAITANIUM</a>
                                    <a href="Bigmountain.html">CARNIVAL® X Big Mountain</a>
                                    <a href="topshirt.html">CARNIVAL® X TOP SECRET</a>
                                </div>
                            </div>

                        </div>
                    </div>
                </li>

                <li class="has-dropdown type-box">
                    <a href="Runnigpage.html" class="menu-link">RUNNING</a>
                </li>



                <li><a href="https://maps.app.goo.gl/w9taHNmVNb9xgCdX6" class="menu-link">SHOP</a></li>

                <li><a href="sale.html" class="menu-link">SALE</a></li>
                <li><a href="seller.html" class="menu-link">SELLER</a></li>
            </ul>
        </nav>
        <div class="nav-icons">
            <a href="../../login_register.htm" class="icon-link" id="user-link">
                <img src="pic/loupe.png" alt="Search">
            </a>

            <!-- <a href="login_register.html" class="icon-link">
                <img src="pic/user.png" alt="User">
            </a> -->

            <a href="profile.html" class="icon-link" id="icon-link">
                <img src="pic/user.png" alt="User">
                <span id="user-name-display" style="display:none; margin-left:5px; font-weight:bold;"></span>
            </a>

            <a href="cart.html" class="icon-link" id="cart-link">
                <img src="pic/parcel.png" alt="Cart">
                <span id="nav-cart-count" class="cart-badge" style="display:none;">0</span>
            </a>

            <div class="lang-selector">
                TH <i class="fas fa-chevron-down"></i>
            </div>
            </a>
        </div>

    </header>
    <!-- Hero Section -->
    <br>
    <br>
    <br>

    <div class="carousel-section">
        <div class="hero-section">
            <img src="pic/Beige Aesthetic Exclusive Fashion Wear Collection Clothing Banner.png"
                alt="Full Screen Banner" class="hero-image">
            <img src="pic/toppp.jpg" alt="Full Screen Banner" class="hero-image">
            <img src="pic/Beige Aesthetic Exclusive Fashion Wear Collection Clothing Banner.png"
                alt="Full Screen Banner" class="hero-image">

        </div>
    </div>

    <!-- Main Container -->
    <br>

    <div class="main-container">

        <header class="section-header">
            <span class="sub-title">NEW COLLECTION</span>
            <h1 class="main-title">NEW ARRIVAL</h1>
        </header>

        <div class="product-grid">
            <a href="pagethaitanium/thaishirt1/thaishirt04.html">
                <div class="product-card">
                    <div class="layer-image" href="pagethaitanium/thaishirt1/thaishirt04.html"><img
                            src="thaita/thai04.jpg" alt="Jacket"></div>
                    <h3 class="product-name">CARNIVAL X THAITANIUM VARSITY JACKET BLACK</h3>
                    <p class="product-price">฿6,500.00 THB</p>
                </div>
            </a>


            <a href="pagethaitanium/thaishirt1/thaishirt01.html">
                <div class="product-card">
                    <div class="layer-image"><img src="thaita/thai01.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X THAITANIUM R.A.S. TEE BLACK</h3>
                    <p class="product-price">฿1,890.00 THB</p>
                </div>
            </a>

            <a href="pagethaitanium/thaishirt1/thaishirt02.html">
                <div class="product-card">
                    <div class="layer-image"><img src="thaita/thai02.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X THAITANIUM THAI RIDER TEE BLACK</h3>
                    <p class="product-price">฿1,890.00 THB</p>
                </div>
            </a>

            <a href="pagethaitanium/thaishirt1/thaishirt03.html">
                <div class="product-card">
                    <div class="layer-image"><img src="thaita/thai03.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X THAITANIUM SOCCER JERSEY BLACK</h3>
                    <p class="product-price">฿1,890.00 THB</p>
                </div>
            </a>

            <a href="pagethaitanium/thaishirt1/thaishirt05.html">
                <div class="product-card">
                    <div class="layer-image"><img src="thaita/thai05.jpg" alt="Item"></div>
                    <h3 class="product-name">(Preorder) CARNIVAL X THAITANIUM TURNTABLE LUCID WHITE</h3>
                    <p class="product-price">฿9,390.00 THB</p>
                </div>
            </a>

            <a href="pagethaitanium/thaishirt1/thaishirt06.html">
                <div class="product-card">
                    <div class="layer-image"><img src="thaita/thai06.jpg" alt="Box"></div>
                    <h3 class="product-name">CARNIVAL X THAITANIUM VINYL STORAGE BLACK</h3>
                    <p class="product-price">฿1,590.00 THB</p>
                </div>
            </a>



            <a href="pagetopsecrert/topshirt/topshirt1.html">
                <div class="product-card">
                    <div class="layer-image"><img src="topsecrect/top1.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X TOP SECRET FAIRLADY HOODIE BLACK</h3>
                    <p class="product-price">฿2,790.00 THB</p>
                </div>
            </a>

            <a href="pagetopsecrert/topshirt/topshirt2.html">
                <div class="product-card">
                    <div class="layer-image"><img src="topsecrect/top2.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X TOP SECRET S15 CREWNECK BLACK</h3>
                    <p class="product-price">฿2,590.00 THB</p>
                </div>
            </a>

            <a href="pagetopsecrert/topshirt/topshirt3.html">
                <div class="product-card">
                    <div class="layer-image"><img src="topsecrect/top3.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X TOP SECRET PERFORMANCE POLO</h3>
                    <p class="product-price">฿3,900.00 THB</p>
                </div>
            </a>


            <a href="pagetopsecrert/topshirt/topshirt4.html">
                <div class="product-card">
                    <div class="layer-image"><img src="topsecrect/top4.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X TOP SECRET SUPRA OVS T-SHIRT BLACK</h3>
                    <p class="product-price">฿2,890.00 THB</p>
                </div>
            </a>
            <a href="pagetopsecrert/topshirt/topshirt5.html">
                <div class="product-card">
                    <div class="layer-image"><img src="topsecrect/top5.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X TOP SECRET BURNOUT OVS T-SHIRT BLACK</h3>
                    <p class="product-price">฿1,890.00 THB</p>
                </div>

            </a>


            <a href="pagetopsecrert/topshirt/topshirt6.html">
                <div class="product-card">
                    <div class="layer-image" href="pagetopsecrert/topshirt/topshirt6.html"><img
                            src="topsecrect/top6.jpg" alt="T-SHIRT"></div>
                    <h3 class="product-name">CARNIVAL X TOP SECRET SPEED OVS T-SHIRT BLACK</h3>
                    <p class="product-price">฿1,590.00 THB</p>
                </div>
            </a>
        </div>
    </div>
    <br>

    <div class="main-container">

        <header class="section-header">
            <span class="sub-title">TRAINING RUNNING</span>
            <h1 class="main-title">NEW ARRIVAL</h1>
        </header>

        <div class="product-grid">
            <a href="pagerun/Itemrun/run01.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run1.1.jpg" alt="SHIRT"></div>
                    <h3 class="product-name">FuzzFleece™ AD Light Hoodie</h3>
                    <p class="product-price">฿22,890.00 THB</p>
                </div>
            </a>

            <a href="pagerun/Itemrun/run02.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run2.1.webp" alt="SHIRT"></div>
                    <h3 class="product-name">Justice™ CoffeeThermal™ Base Layer</h3>
                    <p class="product-price">฿18,890.00 THB</p>
                </div>
            </a>

            <a href="pagerun/Itemrun/run03.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run3.1.webp" alt="SHIRT"></div>
                    <h3 class="product-name">CloudMerino™ Waffle Base Layer</h3>
                    <p class="product-price">฿18,890.00 THB</p>
                </div>
            </a>

            <a href="pagerun/Itemrun/run04.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run4.1.jpg" alt="SHIRT"></div>
                    <h3 class="product-name">CloudMerino™ Waffle Base Layer</h3>
                    <p class="product-price">฿18,990.00 THB</p>
                </div>
            </a>

            <a href="pagerun/Itemrun/run05.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run5.webp" alt="T-SHIRT"></div>
                    <h3 class="product-name">Pertex® Modular Thermal Vest</h3>
                    <p class="product-price">฿19,890.00 THB</p>
                </div>
            </a>
            <a href="pagerun/Itemrun/run06.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run6.webp" alt="T-SHIRT"></div>
                    <h3 class="product-name">CoffeeThermal™ 8" Shorts</h3>
                    <p class="product-price">฿11,890.00 THB</p>
                </div>
            </a>
            <a href="pagerun/Itemrun/run07.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run7.webp" alt="T-SHIRT"></div>
                    <h3 class="product-name">AuraLite™ T‑Shirt</h3>
                    <p class="product-price">฿8,900.00 THB</p>

                </div>
            </a>

            <a href="pagerun/Itemrun/run08.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run8.webp" alt="T-SHIRT"></div>
                    <h3 class="product-name">AuraLite™ T‑Shirt</h3>
                    <p class="product-price">฿8,900.00 THB</p>
                </div>
            </a>

            <a href="pagerun/Itemrun/run09.html">
                <div class="product-card">
                    <div class="layer-image"><img src="running/run9.webp" alt="T-SHIRT"></div>
                    <h3 class="product-name">MothTech™ T‑Shirt</h3>
                    <p class="product-price">฿7,890.00 THB</p>
                </div>
            </a>
            <a href="pagerun/Itemrun/run10.html">

                <div class="product-card">
                    <div class="layer-image"><img src="running/run10.webp" alt="T-SHIRT"></div>
                    <h3 class="product-name">MothTech™ T‑Shirt</h3>
                    <p class="product-price">฿7,890.00 THB</p>
                </div>
            </a>
            <a href="pagerun/Itemrun/run11.html">

                <div class="product-card">
                    <div class="layer-image"><img src="running/item11.webp" alt="Item"></div>
                    <h3 class="product-name">FuzzFleece™ AD Bandana </h3>
                    <p class="product-price">฿5,590.00 THB</p>
                </div>
            </a>
            <a href="pagerun/Itemrun/run12.html">

                <div class="product-card">
                    <div class="layer-image"><img src="running/Item12.webp" alt="Item"></div>
                    <h3 class="product-name">Pertex® FuzzFleece™ AD Bandana</h3>
                    <p class="product-price">฿5,590.00 THB</p>
                </div>
            </a>

        </div>
    </div>
    <br>
    <div class="main-container">

        <header class="section-header">
            <span class="sub-title">Sell 2Nd</span>
            <h1 class="main-title">NEW ARRIVAL 2Nd</h1>
            <div class="nav-icons">
                    <circle cx="9" cy="21" r="1"></circle>
                    <circle cx="20" cy="21" r="1"></circle>
                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
                </svg>
            </div>
        </header>

    </div>

    <script>
    const API_MAIN = 'http://localhost:3000';

    document.addEventListener('DOMContentLoaded', () => {
        loadAllProducts();
    });

    async function loadAllProducts() {
        const container = document.querySelector('.product-grid'); // คลาสของกล่องสินค้า
        if (!container) return;

        try {
            // ดึงสินค้าทั้งหมดจาก API
            const res = await fetch(`${API_MAIN}/seller/all`);
            const products = await res.json();

            // ถ้ามีสินค้า ให้ล้างของเก่า (Static) แล้วใส่ของใหม่
            if (products.length > 0) {
                container.innerHTML = ''; 

                products.forEach(p => {
                    // Path รูป
                    let imgPath = p.image;
                    if(imgPath && !imgPath.startsWith('http')) imgPath = 'public/' + imgPath;

                    const html = `
                    <div class="product-card">
                        <div class="layer-image">
                            <img src="${imgPath}" alt="${p.name}" style="width:100%; object-fit:cover;">
                        </div>
                        <h3 class="product-name">${p.name}</h3>
                        <p class="product-price">฿${parseFloat(p.price).toLocaleString()} THB</p>
                        
                        <!-- ปุ่ม Add to Bag ที่ใช้ได้จริง -->
                        <button class="add-to-cart-btn"
                            onclick="addToCartAPI({
                                userId: localStorage.getItem('user_id'),
                                productId: ${p.id},
                                quantity: 1,
                                size: 'Free Size', // (ถ้าจะให้เลือกไซส์ต้องทำ UI เพิ่ม)
                                color: 'Standard'
                            }, '${p.name}')"
                            style="width:100%; padding:10px; background:#000; color:#fff; border:none; cursor:pointer; margin-top:10px;">
                            Add to Bag
                        </button>
                    </div>
                    `;
                    container.innerHTML += html;
                });
            }
        } catch (err) {
            console.error("Failed to load products:", err);
        }
    }
    
    // ฟังก์ชัน addToCartAPI (ก๊อปปี้มาจาก product_handler.js หรือเรียกใช้ร่วมกันได้)
    async function addToCartAPI(data, productName) {
    try {
        const response = await fetch(`${API_BASE}/cart/add`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(data)
        });

        const result = await response.json();

        if (response.ok) {
            if(confirm(`เพิ่ม "${productName}" ลงตะกร้าเรียบร้อย!\nต้องการไปที่ตะกร้าสินค้าเลยหรือไม่?`)) {
                // [จุดสำคัญ] แก้ Path ให้เป็น Absolute Path (เริ่มด้วย /)
                // เพราะ cart.html อยู่ติดกับ main.html ในโฟลเดอร์ public
                window.location.href = '/cart.html'; 
            } else {
                updateNavBadgeAPI();
            }
        } else {
            alert('เกิดข้อผิดพลาด: ' + (result.error || result.message));
        }

    } catch (error) {
        console.error('Error:', error);
        alert('ไม่สามารถเชื่อมต่อเซิร์ฟเวอร์ได้');
    }
}
</script>



    <!----------------------------------------------------------------------------------------------------------------------------------------->
    <!-- Footer Section -->

    <footer class="site-footer">
        <div class="container">
            <div class="footer-row">

                <div class="footer-col">
                    <h4>CUSTOMER SERVICE</h4>
                    <ul>
                        <li><a href="#">CARNIVAL MEMBERSHIP</a></li>
                        <li><a href="#">HOW TO ORDER</a></li>
                        <li><a href="#">POLICIES</a></li>
                        <li><a href="#">PRIVACY AND COOKIE POLICY</a></li>
                        <li><a href="#">FAQS</a></li>
                        <li><a href="#">HOT LINE : 063-6423-892</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>SHIPPING</h4>
                    <ul>
                        <li><a href="#">SHIPPING POLICY</a></li>
                        <li><a href="#">STATUS TRACKING</a></li>
                        <li><a href="#">STORE LOCATION</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>CONTACT US</h4>
                    <ul>
                        <li><a href="#">ABOUT US</a></li>
                        <li><a href="#">CONTACT PHONE:063-6423-892</a></li>
                        <li><a href="#">Kthanwisesvong06364@gamil.COM</a></li>
                    </ul>
                </div>

                <div class="footer-col">
                    <h4>FOLLOW US</h4>
                    <div class="social-links">
                        <a href="https://www.facebook.com/kan.tphn.than.wises.wngs" target="_blank">
                            <img src="pic/facebook-app-symbol.png" alt="Facebook">
                        </a>
                        <a href="https://www.instagram.com/gtar_29/" target="_blank">
                            <img src="pic/instagram.png" alt="Instagram">
                        </a>
                        <a href="#" target="_blank">
                            <img src="pic/line.png" alt="Line">
                        </a>
                    </div>
                </div>

            </div>

            <hr>
            <div class="footer-copyright">
                <p>&copy; CARNIVAL SUPPLY CO.,LTD. ALL RIGHTS RESERVED.</p>
            </div>
        </div>
    </footer>
    <script src="../../global_session.js"></script>

</body>

</html>